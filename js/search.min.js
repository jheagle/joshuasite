function filter(e,t,n){var r=jQuery.extend(true,{},e);n=n||"all";var i=[];if(t.length>0){var s=$.trim(t).split(" ");switch(n){case"all":case"name":$.each(r,function(e,t){var n=0,r=[],o=[];$.each(s,function(e,i){var u=0;i=escapeRegExp(i);var a=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","ig"):new RegExp(i,"ig");var f=t.name.match(a);u=(f||[]).length;if(u>0){var l=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","g"):new RegExp(i,"g");f=t.name.match(l);u+=(f||[]).length;t.name=t.name.replace(a,"<strong>$&</strong>")}if(u<=0){if(jQuery.inArray(i,r)<0){r.push(i)}n-=Math.ceil(n/(e+1))}else{if(jQuery.inArray(i,o)<0){o.push(i)}n+=Math.floor(u*100/s.length)}});if(r.length>o.length){n=0}if(i.length>e){n+=i[e].value;$.each(i[e].noMatch,function(e,t){if(jQuery.inArray(t,r)<0){r.push(t)}});$.each(i[e].match,function(e,t){if(jQuery.inArray(t,o)<0){o.push(t)}})}i[e]={key:t,value:n,noMatch:r,match:o}});if(n==="name")break;case"type":$.each(r,function(e,t){var n=0,r=[],o=[],u=t.type.split(/\s*,\s*/).length;$.each(s,function(e,i){var a=0;i=escapeRegExp(i);var f=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","ig"):new RegExp(i,"ig");var l=t.type.match(f);a=(l||[]).length;if(a>0){var c=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","g"):new RegExp(i,"g");l=t.type.match(c);a+=(l||[]).length;t.type=t.type.replace(f,"<strong>$&</strong>")}if(a<=0){if(jQuery.inArray(i,r)<0){r.push(i)}n-=Math.ceil(n/(e+1))}else{if(jQuery.inArray(i,o)<0){o.push(i)}n+=Math.floor(a*100/s.length/u*2)}});if(r.length>o.length){n=0}if(i.length>e){n+=i[e].value;$.each(i[e].noMatch,function(e,t){if(jQuery.inArray(t,r)<0){r.push(t)}});$.each(i[e].match,function(e,t){if(jQuery.inArray(t,o)<0){o.push(t)}})}i[e]={key:t,value:n,noMatch:r,match:o}});if(n==="type")break;case"location":$.each(r,function(e,t){var n=0,r=[],o=[];$.each(s,function(e,i){var u=0;i=escapeRegExp(i);var a=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","ig"):new RegExp(i,"ig");var f=t.location.match(a);u=(f||[]).length;if(u>0){var l=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","g"):new RegExp(i,"g");f=t.location.match(l);u+=(f||[]).length;t.location=t.location.replace(a,"<strong>$&</strong>")}if(u<=0){if(jQuery.inArray(i,r)<0){r.push(i)}n-=Math.ceil(n/(e+1))}else{if(jQuery.inArray(i,o)<0){o.push(i)}n+=Math.floor(u*100/s.length*2)}});if(r.length>o.length){n=0}if(i.length>e){n+=i[e].value;$.each(i[e].noMatch,function(e,t){if(jQuery.inArray(t,r)<0){r.push(t)}});$.each(i[e].match,function(e,t){if(jQuery.inArray(t,o)<0){o.push(t)}})}i[e]={key:t,value:n,noMatch:r,match:o}});if(n==="location")break;default:$.each(r,function(e,t){var n=0,r=[],o=[],u=[],a=true,f=0,l=0;$.each(s,function(e,i){var f=0;i=escapeRegExp(i);var l=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","ig"):new RegExp(i,"ig");var c=t.description.match(l);f=(c||[]).length;if(f>0){var h=i.length>1||s.length>1?new RegExp("\\b"+i+"\\b","g"):new RegExp(i,"g");c=t.description.match(h);f+=(c||[]).length;t.description=t.description.replace(l,"<strong>$&</strong>")}if(f<=0){if(jQuery.inArray(i,r)<0){r.push(i)}a=false;n-=Math.ceil(n/(e+1))}else{if(jQuery.inArray(i,o)<0){o.push(i)}n+=Math.floor(f*100/s.length);u.push(f)}});if(r.length>o.length){n=0}else{for(var c=0;c<u.length;c++){if(f===0){f=u[c]}if(u[c]<f){f=u[c]}if(u[c]>l){l=u[c]}}if(n>0){var h=n-l<l-f?n-l:l-f;n=n-h}if(a){n+=f*3}else{n+=f*2}}if(i.length>e){n+=i[e].value;$.each(i[e].noMatch,function(e,t){if(jQuery.inArray(t,r)<0){r.push(t)}});$.each(i[e].match,function(e,t){if(jQuery.inArray(t,o)<0){o.push(t)}})}i[e]={key:t,value:n,noMatch:r,match:o}})}i=mergeSort(i)}return i}function escapeRegExp(e){return e.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function mergeSort(e){if(e.length<2){e=e[0].value>0?e:[];return e}var t=Math.floor(e.length/2),n=e.slice(0,t),r=e.slice(t),i=merge(mergeSort(n),mergeSort(r));i.unshift(0,e.length);e.splice.apply(e,i);return e}function merge(e,t){var n=[],r=0,i=0;while(r<e.length&&i<t.length){if(e[r].value>t[i].value){n.push(e[r++])}else{if(t[i].value>0)n.push(t[i]);i++}}return n.concat(e.slice(r)).concat(t.slice(i))}$(document).ready(function(){(function(){function r(){$(".results").html(t[n]);$(".pagination").empty();var e=0;if(n>6){e=t.length-n;if(e<2){e=-7}else if(e<3){e=-6}else if(e<4){e=-5}else if(e<5){e=-4}else if(e<6){e=-3}else if(e<7){e=-2}else if(e<8){e=-1}else{e=0}}var r=0-n+1;r=r>-7&&r<7?r+e:-6+e;for(var i=0;i<15&&i<t.length;i++){if(r===1){$(".pagination").append("<a class='current' id='pagi-"+(n+r)+"' href='#'>"+(n+r)+"</a>")}else{$(".pagination").append("<a id='pagi-"+(n+r)+"' href='#'>"+(n+r)+"</a>")}++r}if(n>0){$(".pagination").prepend("<a id='pagi-first' href='#'>&#171;</a><a id='pagi-prev' href='#'>&lsaquo;</a>")}if(n<t.length-1&&t.length>1){$(".pagination").append("<a id='pagi-next' href='#'>&rsaquo;</a><a id='pagi-last' href='#'>&#187;</a>")}$(".pagination").prepend("<p>Page "+(n+1)+" of "+t.length+"</p>")}function i(r,i){i=i.toLowerCase()||"all";$(".results").empty();var s=(new Date).getTime(),o=filter(e,r,i);s=((new Date).getTime()-s)/1e3;$(".results").append(o.length+" Results for <strong>'"+r+"'</strong>"+"<br>Returned in "+s+" seconds");var u="",a=0;t=$();$.each(o,function(e,n){if(n.value>0){var i=n.key,s=n.noMatch,o=n.match,f=r;$.each(s,function(e,t){if(jQuery.inArray(t,o)<0){var n=new RegExp(t,"ig");f=f.replace(n,"<del>$&</del>")}});var l=(a%10===0?"<hr />":"")+"<p><strong>Match Score "+n.value+"</strong></p><p>"+f+"</p><div class='result'><a href='"+i.url+"'><img src='"+i.img+"' alt='"+i.name+"'></a><div><a href='"+i.url+"'><h3>"+i.name+"</h3><h4>Created at "+i.location+"</h4><p>"+i.description+"</p></a></div><p>"+i.type+"</p></div><hr />";u+=l;if((a+1)%10===0){t.push(u);u=""}a++}});if(u.length>0){t.push(u)}$(".pagination").empty();for(var f=0;f<t.length;f++){$(".pagination").append("<a id='pagi-"+(f+1)+"' href='#'>"+(f+1)+"</a>&nbsp;")}if(t.length>1){$(".pagination").append("<a id='pagi-next' href='#'>Next</a>&nbsp;<a id='pagi-last' href='#'>Last</a>")}n=0;$(".results").append(t[n])}var e=$();var t=$(),n=0;$.getJSON("/db/projects.json",function(r){$(".results").empty();$(".results").append("All projects from most recent.");e=r.projects;var i="";$.each(e,function(e,n){var r=(e%10===0?"<hr />":"")+"<div class='result'><a href='"+n.url+"'><img src='"+n.img+"' alt='"+n.name+"'></a><div><a href='"+n.url+"'><h3>"+n.name+"</h3><h4>Created at "+n.location+"</h4><p>"+n.description+"</p></a></div><p>"+n.type+"</p></div><hr />";i+=r;if((e+1)%10===0){t.push(i);i=""}});if(i.length>0){t.push(i)}n=0;$(".results").append(t[n]);$(".pagination").empty();var s=0;if(n>6){s=t.length-n;if(s<2){s=-7}else if(s<3){s=-6}else if(s<4){s=-5}else if(s<5){s=-4}else if(s<6){s=-3}else if(s<7){s=-2}else if(s<8){s=-1}else{s=0}}var o=0-n+1;o=o>-7&&o<7?o+s:-6+s;for(var u=0;u<15&&u<t.length;u++){if(o===1){$(".pagination").append("<a class='current' id='pagi-"+(n+o)+"' href='#'>"+(n+o)+"</a>")}else{$(".pagination").append("<a id='pagi-"+(n+o)+"' href='#'>"+(n+o)+"</a>")}++o}if(t.length>1){$(".pagination").append("<a id='pagi-next' href='#'>&rsaquo;</a><a id='pagi-last' href='#'>&#187;</a>")}$(".pagination").prepend("<p>Page "+(n+1)+" of "+t.length+"</p>")});$("#type").change(function(){if($("#search").val().trim()!="")i($("#search").val(),$("#type").find(":selected").text())});$("#search").keyup(function(e){s(function(){i($("#search").val(),$("#type").find(":selected").text())},600)});$("#searchBtn").click(function(e){i($("#search").val(),$("#type").find(":selected").text())});$(".pagination").on("click","a",function(){var e=$(this).attr("id");e=e.replace("pagi-","");if($.isNumeric(e)){n=parseInt(e)-1}else{switch(e){case"first":n=0;break;case"prev":n=n>0?n-1:0;break;case"next":n=n<t.length?n+1:n;break;default:n=t.length-1;break}}r()});var s=function(){var e=0;return function(t,n){clearTimeout(e);e=setTimeout(t,n)}}()})()})